import{j as e,a as b,r as p}from"./react-BqHK-q4C.js";import{c as j}from"./react-dom-dbnnRLDV.js";import{u as w,a as R,b as x}from"./react-router-CXGh9DZA.js";import{C as v,a as I,b as L,T as h,c as N,B as g,d as C}from"./@mui-JThmSf2R.js";import{B as O}from"./react-router-dom-BYcIk-1K.js";import"./@babel-Un13qMLU.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Uz_hvaH8.js";import"./clsx-B-dksMZM.js";import"./@emotion-CFCC6Tb3.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-BjZA61ff.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}})();function P(o){const n=w(),c=()=>{n(o.url)};return e.jsxs(v,{sx:{maxWidth:345,borderRadius:"30px",background:"#e0e0e0",boxShadow:"20px 20px 39px #bebebe, -20px -20px 39px #eaeaea4a",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{boxShadow:"30px 30px 60px #bebebe, -30px -30px 60px #eaeaea4a",transform:"translateY(-5px) scale(1.05)"}},children:[e.jsx(I,{onClick:()=>{c()},sx:{height:140,cursor:"pointer"},image:o.imageURL??""}),e.jsxs(L,{children:[e.jsx(h,{gutterBottom:!0,variant:"h5",component:"div",children:o.title}),e.jsx(h,{variant:"body2",color:"text.secondary",children:o.content})]}),e.jsxs(N,{children:[e.jsx(g,{onClick:()=>{c()},size:"small",children:"Visit"}),e.jsx(g,{onClick:()=>{c()},size:"small",children:"访问"})]})]})}const m=[{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"}],T=()=>e.jsx("div",{className:"apps",children:e.jsx("div",{className:"grid-container",children:Array.from({length:3}).map((o,n)=>e.jsx("div",{className:"grid-item",children:e.jsx(P,{url:m[n].url,imageURL:m[n].imgUrl,title:m[n].title,content:m[n].content})},n))})}),y=b.forwardRef((o,n)=>e.jsx("textarea",{ref:n,"aria-label":"textarea",placeholder:"Enter your text",style:{width:"100%",minHeight:"100px",padding:"10px",margin:"5px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",resize:"none",fontFamily:"inherit",backgroundColor:"#f5f5f5",transition:"border-color 0.2s ease","&:focus":{borderColor:"#4CAF50"}},...o})),k=()=>{const o=p.useRef(null),n=p.useRef(null),c=p.useRef(null),u=p.useRef(null);return p.useEffect(()=>{const t=new WebSocket("wss://webrtc-wabmmfcxmo.cn-shanghai.fcapp.run");u.current=t;const r=async()=>{const a=new RTCPeerConnection;c.current=a,a.onicecandidate=i=>{i.candidate&&t.send(JSON.stringify({type:"iceCandidate",candidate:i.candidate}))},a.ondatachannel=i=>{const l=i.channel;l.onmessage=s=>{n.current&&(n.current.value=s.data+`
`)}},t.onmessage=async i=>{const l=new FileReader;l.readAsText(i.data,"utf-8"),l.onload=async()=>{const s=JSON.parse(l.result);if(console.log(s),s.type==="offer"){await a.setRemoteDescription(s.offer);const f=await a.createAnswer();await a.setLocalDescription(f),t.send(JSON.stringify({type:"answer",answer:f}))}else s.type==="answer"?await a.setRemoteDescription(s.answer):s.type==="iceCandidate"&&await a.addIceCandidate(s.candidate)}}},d=async()=>{console.log("startCalls");const a=c.current;if(a){const i=a.createDataChannel("messageChannel");i.onopen=()=>{o.current&&o.current.addEventListener("input",s=>{const f=s.target;i.send(f.value)})};const l=await a.createOffer();await a.setLocalDescription(l),t.send(JSON.stringify({type:"offer",offer:l}))}};return(async()=>{await r(),t.onopen=d})(),()=>{t.close()}},[]),e.jsxs(C,{sx:{width:"65svw",height:"80svh",display:"flex",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(y,{ref:o,placeholder:"Local text"}),e.jsx(y,{ref:n,placeholder:"Remote text",readOnly:!0})]})};function A(){return e.jsx(C,{className:"apps",children:e.jsx(k,{})})}function S(){return e.jsx(O,{children:e.jsxs(R,{children:[e.jsx(x,{path:"/",element:e.jsx(T,{})}),e.jsx(x,{path:"/chat",element:e.jsx(A,{})})]})})}j.createRoot(document.getElementById("root")).render(e.jsx(S,{}));
