const{slice:m,forEach:w}=[];function S(n){return w.call(m.call(arguments,1),e=>{if(e)for(const o in e)n[o]===void 0&&(n[o]=e[o])}),n}const c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,k=function(n,e){const t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let a=`${n}=${i}`;if(t.maxAge>0){const r=t.maxAge-0;if(Number.isNaN(r))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(r)}`}if(t.domain){if(!c.test(t.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${t.domain}`}if(t.path){if(!c.test(t.path))throw new TypeError("option path is invalid");a+=`; Path=${t.path}`}if(t.expires){if(typeof t.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${t.expires.toUTCString()}`}if(t.httpOnly&&(a+="; HttpOnly"),t.secure&&(a+="; Secure"),t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a},d={create(n,e,o,t){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};o&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+o*60*1e3)),t&&(i.domain=t),document.cookie=k(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,o=document.cookie.split(";");for(let t=0;t<o.length;t++){let i=o[t];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var y={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return d.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:o,cookieMinutes:t,cookieDomain:i,cookieOptions:a}=e;o&&typeof document<"u"&&d.create(o,n,t,i,a)}},x={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,o;if(typeof window<"u"){let{search:t}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(t=window.location.hash.substring(window.location.hash.indexOf("?")));const a=t.substring(1).split("&");for(let r=0;r<a.length;r++){const l=a[r].indexOf("=");l>0&&a[r].substring(0,l)===e&&(o=a[r].substring(l+1))}}return o}};let s=null;const g=()=>{if(s!==null)return s;try{if(s=typeof window<"u"&&window.localStorage!==null,!s)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{s=!1}return s};var v={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&g())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:o}=e;o&&g()&&window.localStorage.setItem(o,n)}};let u=null;const f=()=>{if(u!==null)return u;try{if(u=typeof window<"u"&&window.sessionStorage!==null,!u)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{u=!1}return u};var b={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&f())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:o}=e;o&&f()&&window.sessionStorage.setItem(o,n)}},D={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:o,userLanguage:t,language:i}=navigator;if(o)for(let a=0;a<o.length;a++)e.push(o[a]);t&&e.push(t),i&&e.push(i)}return e.length>0?e:void 0}},L={name:"htmlTag",lookup(n){let{htmlTag:e}=n,o;const t=e||(typeof document<"u"?document.documentElement:null);return t&&typeof t.getAttribute=="function"&&(o=t.getAttribute("lang")),o}},I={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof e=="number"?e:0]?.replace("/",""):void 0}},C={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const o=typeof e=="number"?e+1:1,t=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(t)return t[o]}};let p=!1;try{document.cookie,p=!0}catch{}const h=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];p||h.splice(1,1);const U=()=>({order:h,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class A{constructor(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,o)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=S(o,this.options||{},U()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=t,this.addDetector(y),this.addDetector(x),this.addDetector(v),this.addDetector(b),this.addDetector(D),this.addDetector(L),this.addDetector(I),this.addDetector(C)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,o=[];return e.forEach(t=>{if(this.detectors[t]){let i=this.detectors[t].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(o=o.concat(i))}}),o=o.map(t=>this.options.convertDetectedLanguage(t)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?o:o.length>0?o[0]:null}cacheUserLanguage(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||o.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}A.type="languageDetector";export{A as B};
