import{j as e,a as C,r as p}from"./react-BqHK-q4C.js";import{c as b}from"./react-dom-Df9FThwo.js";import{b as w}from"./react-router-DgxUZWqx.js";import{C as j,a as R,b as v,T as x,c as P,B as h,d as y}from"./@mui-DAeFlZAj.js";import{c as I,R as L}from"./react-router-dom-YLrE_Hlk.js";import"./@babel-Un13qMLU.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-D7hcPYne.js";import"./clsx-B-dksMZM.js";import"./@emotion-CFCC6Tb3.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-BOhxvKS6.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&f(d)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}})();function N(a){const n=w(),c=()=>{n(a.url)};return e.jsxs(j,{sx:{maxWidth:345,borderRadius:"30px",background:"#e0e0e0",boxShadow:"20px 20px 39px #bebebe, -20px -20px 39px #eaeaea4a",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{boxShadow:"30px 30px 60px #bebebe, -30px -30px 60px #eaeaea4a",transform:"translateY(-5px) scale(1.05)"}},children:[e.jsx(R,{onClick:()=>{c()},sx:{height:140,cursor:"pointer"},image:a.imageURL??""}),e.jsxs(v,{children:[e.jsx(x,{gutterBottom:!0,variant:"h5",component:"div",children:a.title}),e.jsx(x,{variant:"body2",color:"text.secondary",children:a.content})]}),e.jsxs(P,{children:[e.jsx(h,{onClick:()=>{c()},size:"small",children:"Visit"}),e.jsx(h,{onClick:()=>{c()},size:"small",children:"访问"})]})]})}const m=[{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:"https://bigonion.cn/background/packImg/1.jfif",url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"}],O=()=>e.jsx("div",{className:"apps",children:e.jsx("div",{className:"grid-container",children:Array.from({length:3}).map((a,n)=>e.jsx("div",{className:"grid-item",children:e.jsx(N,{url:m[n].url,imageURL:m[n].imgUrl,title:m[n].title,content:m[n].content})},n))})}),g=C.forwardRef((a,n)=>e.jsx("textarea",{ref:n,"aria-label":"textarea",placeholder:"Enter your text",style:{width:"100%",minHeight:"100px",padding:"10px",margin:"5px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",resize:"none",fontFamily:"inherit",backgroundColor:"#f5f5f5",transition:"border-color 0.2s ease","&:focus":{borderColor:"#4CAF50"}},...a})),T=()=>{const a=p.useRef(null),n=p.useRef(null),c=p.useRef(null),f=p.useRef(null);return p.useEffect(()=>{const t=new WebSocket("wss://webrtc-wabmmfcxmo.cn-shanghai.fcapp.run");f.current=t;const r=async()=>{const o=new RTCPeerConnection;c.current=o,o.onicecandidate=i=>{i.candidate&&t.send(JSON.stringify({type:"iceCandidate",candidate:i.candidate}))},o.ondatachannel=i=>{const l=i.channel;l.onmessage=s=>{n.current&&(n.current.value=s.data+`
`)}},t.onmessage=async i=>{const l=new FileReader;l.readAsText(i.data,"utf-8"),l.onload=async()=>{const s=JSON.parse(l.result);if(console.log(s),s.type==="offer"){await o.setRemoteDescription(s.offer);const u=await o.createAnswer();await o.setLocalDescription(u),t.send(JSON.stringify({type:"answer",answer:u}))}else s.type==="answer"?await o.setRemoteDescription(s.answer):s.type==="iceCandidate"&&await o.addIceCandidate(s.candidate)}}},d=async()=>{console.log("startCalls");const o=c.current;if(o){const i=o.createDataChannel("messageChannel");i.onopen=()=>{a.current&&a.current.addEventListener("input",s=>{const u=s.target;i.send(u.value)})};const l=await o.createOffer();await o.setLocalDescription(l),t.send(JSON.stringify({type:"offer",offer:l}))}};return(async()=>{await r(),t.onopen=d})(),()=>{t.close()}},[]),e.jsxs(y,{sx:{width:"65svw",height:"80svh",display:"flex",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(g,{ref:a,placeholder:"Local text"}),e.jsx(g,{ref:n,placeholder:"Remote text",readOnly:!0})]})};function k(){return e.jsx(y,{className:"apps",children:e.jsx(T,{})})}const A=I([{path:"/",element:e.jsx(O,{})},{path:"/chat",element:e.jsx(k,{})}]);function S(){return e.jsx(e.Fragment,{children:e.jsx(L,{router:A})})}b.createRoot(document.getElementById("root")).render(e.jsx(S,{}));
