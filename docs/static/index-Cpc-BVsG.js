import{j as e,a as b,r as p}from"./react-BqHK-q4C.js";import{c as j}from"./react-dom-dbnnRLDV.js";import{C as R,d as v,a as L,T as h,b as N,B as g,c as C}from"./@mui-DU2RanG9.js";import{u as O,a as P,b as y}from"./react-router-C8cpn1W2.js";import{H as A}from"./react-router-dom-BcjLOkYU.js";import"./@babel-Un13qMLU.js";import"./scheduler-CzFDRTuY.js";import"./clsx-B-dksMZM.js";import"./@emotion-BhZtxvfC.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-BjZA61ff.js";import"./react-is-DcfIKM1A.js";import"./@remix-run-4ybEbhEz.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();function I(o){const n=O(),l=()=>{n(o.url)};return e.jsxs(R,{sx:{maxWidth:345,borderRadius:"30px",background:"#e0e0e0",boxShadow:"20px 20px 39px #bebebe, -20px -20px 39px #eaeaea4a",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{boxShadow:"30px 30px 60px #bebebe, -30px -30px 60px #eaeaea4a",transform:"translateY(-5px) scale(1.05)"}},children:[e.jsx("center",{children:e.jsx(v,{})}),e.jsxs(L,{children:[e.jsx(h,{gutterBottom:!0,variant:"h5",component:"div",children:o.title}),e.jsx(h,{variant:"body2",color:"text.secondary",children:o.content})]}),e.jsxs(N,{children:[e.jsx(g,{onClick:()=>{l()},size:"small",children:"Visit"}),e.jsx(g,{onClick:()=>{l()},size:"small",children:"访问"})]})]})}const x="data:image/svg+xml,%3csvg%20t='1720982358955'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='7073'%20width='200'%20height='200'%3e%3cpath%20d='M320%20896c64%200%2096-74.88%2096-128V192H270.72a96%2096%200%200%200-94.08%2077.12L160%20352H96V128a64%2064%200%200%201%2064-64h704a64%2064%200%200%201%2064%2064v224h-64l-16.64-82.88A96%2096%200%200%200%20753.28%20192H608v576c0%2053.12%2032%20128%2096%20128v64H320z'%20fill='%23231F20'%20p-id='7074'%3e%3c/path%3e%3c/svg%3e",m=[{imgUrl:x,url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:x,url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"},{imgUrl:x,url:"/chat",title:"文字共享",content:"这是一个基于WebRTC技术的共享文本在线APP，只需要连接两个同样的WIFI即可传输文本信息"}],S=()=>e.jsx("div",{className:"apps",children:e.jsx("div",{className:"grid-container",children:Array.from({length:3}).map((o,n)=>e.jsx("div",{className:"grid-item",children:e.jsx(I,{url:m[n].url,imageURL:m[n].imgUrl,title:m[n].title,content:m[n].content})},n))})}),w=b.forwardRef((o,n)=>e.jsx("textarea",{ref:n,"aria-label":"textarea",placeholder:"Enter your text",style:{width:"100%",minHeight:"100px",padding:"10px",margin:"5px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",resize:"none",fontFamily:"inherit",backgroundColor:"#f5f5f5",transition:"border-color 0.2s ease","&:focus":{borderColor:"#4CAF50"}},...o})),T=()=>{const o=p.useRef(null),n=p.useRef(null),l=p.useRef(null),u=p.useRef(null);return p.useEffect(()=>{const t=new WebSocket("wss://webrtc-wabmmfcxmo.cn-shanghai.fcapp.run");u.current=t;const r=async()=>{const a=new RTCPeerConnection;l.current=a,a.onicecandidate=i=>{i.candidate&&t.send(JSON.stringify({type:"iceCandidate",candidate:i.candidate}))},a.ondatachannel=i=>{const c=i.channel;c.onmessage=s=>{n.current&&(n.current.value=s.data+`
`)}},t.onmessage=async i=>{const c=new FileReader;c.readAsText(i.data,"utf-8"),c.onload=async()=>{const s=JSON.parse(c.result);if(console.log(s),s.type==="offer"){await a.setRemoteDescription(s.offer);const f=await a.createAnswer();await a.setLocalDescription(f),t.send(JSON.stringify({type:"answer",answer:f}))}else s.type==="answer"?await a.setRemoteDescription(s.answer):s.type==="iceCandidate"&&await a.addIceCandidate(s.candidate)}}},d=async()=>{console.log("startCalls");const a=l.current;if(a){const i=a.createDataChannel("messageChannel");i.onopen=()=>{o.current&&o.current.addEventListener("input",s=>{const f=s.target;i.send(f.value)})};const c=await a.createOffer();await a.setLocalDescription(c),t.send(JSON.stringify({type:"offer",offer:c}))}};return(async()=>{await r(),t.onopen=d})(),()=>{t.close()}},[]),e.jsxs(C,{sx:{width:"65svw",height:"80svh",display:"flex",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(w,{ref:o,placeholder:"Local text"}),e.jsx(w,{ref:n,placeholder:"Remote text",readOnly:!0})]})};function W(){return e.jsx(C,{className:"apps",children:e.jsx(T,{})})}function F(){return e.jsx(A,{children:e.jsxs(P,{children:[e.jsx(y,{path:"/",element:e.jsx(S,{})}),e.jsx(y,{path:"/chat",element:e.jsx(W,{})})]})})}j.createRoot(document.getElementById("root")).render(e.jsx(F,{}));
